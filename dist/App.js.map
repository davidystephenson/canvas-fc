{"version":3,"sources":["../src/App.tsx"],"names":[],"mappings":"AAAA,6EAEe,WAAc,CAAE,QAAO,SAAQ,OAAM,UAAS,aAM7C,CACd,GAAM,CAAC,EAAe,GAAoB,EAA0C,IAAI,EAElF,EAAc,EAAY,AAAC,GAAsB,CACrD,AAAI,EAAU,SAAW,MAEzB,YAAU,CAAE,QAAO,OAAQ,EAAU,OAAQ,GAC/C,EAAG,CAAC,CAAO,CAAC,EAEZ,EAAU,IAAM,CACd,GAAI,GACJ,YAAyB,CACvB,AAAI,GAAiB,MAAQ,GAAQ,MACrC,GAAK,CAAa,EAClB,EAAmB,OAAO,sBAAsB,CAAM,EACxD,CACA,SAAO,EACA,IAAM,CACX,OAAO,qBAAqB,CAAgB,CAC9C,CACF,EAAG,CAAC,EAAM,CAAa,CAAC,EAExB,GAAM,GAAY,EAA0B,IAAI,EAEhD,SAAU,IAAM,CACd,GAAM,GAAS,EAAU,QACzB,GAAI,GAAU,KAAM,OAEpB,GAAM,GAAU,EAAO,WAAW,IAAI,EACtC,EAAiB,CAAO,CAC1B,EAAG,CAAC,CAAS,CAAC,EAGZ,oBAAC,UACC,IAAK,EACL,QAAS,EACT,MAAO,EACP,OAAQ,EACR,UAAW,EACb,CAEJ","sourcesContent":["import { useRef, useState, useEffect, useCallback, MouseEvent } from 'react'\n\nexport default function App ({ width, height, draw, onClick, className }: {\n  width?: number\n  height?: number\n  draw?: (canvasContext: CanvasRenderingContext2D) => void\n  onClick?: ({ event, canvas }: { event: MouseEvent, canvas: HTMLCanvasElement }) => void\n  className?: string\n}): JSX.Element {\n  const [canvasContext, setCanvasContext] = useState<CanvasRenderingContext2D | null>(null)\n\n  const handleClick = useCallback((event: MouseEvent) => {\n    if (canvasRef.current == null) return\n\n    onClick?.({ event, canvas: canvasRef.current })\n  }, [onClick])\n\n  useEffect(() => {\n    let animationFrameId: number\n    function render (): void {\n      if (canvasContext == null || draw == null) return\n      draw(canvasContext)\n      animationFrameId = window.requestAnimationFrame(render)\n    }\n    render()\n    return () => {\n      window.cancelAnimationFrame(animationFrameId)\n    }\n  }, [draw, canvasContext])\n\n  const canvasRef = useRef<HTMLCanvasElement>(null)\n\n  useEffect(() => {\n    const canvas = canvasRef.current\n    if (canvas == null) return\n\n    const context = canvas.getContext('2d')\n    setCanvasContext(context)\n  }, [canvasRef])\n\n  return (\n    <canvas\n      ref={canvasRef}\n      onClick={handleClick}\n      width={width}\n      height={height}\n      className={className}\n    />\n  )\n}\n"]}